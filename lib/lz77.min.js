!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define("lz77",[],r):"object"==typeof exports?exports.lz77=r():e.lz77=r()}("undefined"!=typeof self?self:this,function(){return function(e){function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}var t={};return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},r.p="",r(r.s=0)}([function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={},o={refPrefix:"`",refIntBase:96,refIntFloorCode:" ".charCodeAt(0),refIntCeilCode:void 0,maxStringDistance:void 0,minStringLength:5,maxStringLength:void 0,defaultWindow:144,maxWindow:void 0,windowLength:void 0},i=function(e,r,t){var n={};if(null!==e)if(Array.prototype.forEach&&e.forEach===Array.prototype.forEach)e.forEach(r,t);else if(e.length===+e.length){for(var o=0,i=e.length;o<i;o++)if(r.call(t,e[o],o,e)===n)return}else for(var f in e)if(e.hasOwnProperty(f)&&r.call(t,e[f],f,e)===n)return},f=function(e){return i(Array.prototype.slice.call(arguments,1),function(r){if(r)for(var t in r)e[t]=r[t]}),e},a=function(e){e=e||{},o=f(o,e),o.refIntCeilCode=o.refIntFloorCode+o.refIntBase-1,o.maxStringDistance=Math.pow(o.refIntBase,2)-1,o.maxStringLength=Math.pow(o.refIntBase,1)-1+o.minStringLength,o.maxWindow=o.maxStringDistance+o.minStringLength},c=function(e,r){if(e>=0&&e<Math.pow(o.refIntBase,r)-1){for(var t="";e>0;)t=String.fromCharCode(e%o.refIntBase+o.refIntFloorCode)+t,e=Math.floor(e/o.refIntBase);for(var n=r-t.length,i=0;i<n;i++)t=String.fromCharCode(o.refIntFloorCode)+t;return t}throw new Error("Reference int out of range: "+e+" (width = "+r+")")},l=function(e){return c(e-o.minStringLength,1)},u=function(e,r){for(var t=0,n=void 0,i=0;i<r;i++){if(t*=o.refIntBase,!((n=e.charCodeAt(i))>=o.refIntFloorCode&&n<=o.refIntCeilCode))throw new Error("Invalid char code in reference int: "+n);t+=n-o.refIntFloorCode}return t},d=function(e){return u(e,1)+o.minStringLength};n.compress=function(e,r){if("[object String]"!==Object.prototype.toString.call(e))return!1;a(r);var t=o.windowLength||o.defaultWindow;if(t>o.maxWindow)throw new Error("Window length too large");for(var n="",i=0,f=e.length-o.minStringLength;i<f;){for(var u=Math.max(i-t,0),d=o.minStringLength,g=!1,h={distance:o.maxStringDistance,length:0},s=null,p=void 0,m=void 0;u+d<i;)p=e.substr(u,d)===e.substr(i,d)&&d<o.maxStringLength,p?(d++,g=!0):(m=d-1,g&&m>h.length&&(h.distance=i-u-m,h.length=m),d=o.minStringLength,u++,g=!1);h.length?(s=o.refPrefix+c(h.distance,2)+l(h.length),i+=h.length):(s=e.charAt(i)!==o.refPrefix?e.charAt(i):o.refPrefix+o.refPrefix,i++),n+=s}return n+e.slice(i).replace(/`/g,"``")},n.decompress=function(e,r){if("[object String]"!==Object.prototype.toString.call(e))return!1;var t="",n=0,i=void 0,f=void 0,c=void 0,l=void 0;for(a(r);n<e.length;)i=e.charAt(n),i!==o.refPrefix?(t+=i,n++):(f=e.charAt(n+1),f!==o.refPrefix?(c=u(e.substr(n+1,2),2),l=d(e.charAt(n+3)),t+=t.substr(t.length-c-l,l),n+=o.minStringLength-1):(t+=o.refPrefix,n+=2));return t},r.default=n,e.exports=r.default}])});